<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<!-- Apple devices fullscreen -->
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<!-- Apple devices fullscreen -->
	<meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	
	<title>自然堂</title>

	<!-- Bootstrap CSS框架-->
	<link rel="stylesheet" href="adminskin/css/bootstrap.min.css">
	<!-- Bootstrap responsive 响应式布局CSS框架-->
	<link rel="stylesheet" href="adminskin/css/bootstrap-responsive.min.css">
	<!-- jQuery UI -->
	<link rel="stylesheet" href="adminskin/css/plugins/jquery-ui/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="adminskin/css/plugins/jquery-ui/smoothness/jquery.ui.theme.css">
	<!-- timepicker时间选择器 -->
	<link rel="stylesheet" href="adminskin/css/plugins/timepicker/bootstrap-timepicker.min.css">
	<!-- colorpicker颜色选择器-->
	<link rel="stylesheet" href="adminskin/css/plugins/colorpicker/colorpicker.css">
	<!-- Datepicker日期选择器 -->
	<link rel="stylesheet" href="adminskin/css/plugins/datepicker/datepicker.css">
	<!-- chosen选择  -->
	<link rel="stylesheet" href="adminskin/css/plugins/chosen/chosen.css">
	<!-- multi select 多选-->
	<link rel="stylesheet" href="adminskin/css/plugins/multiselect/multi-select.css">
	<!-- Tagsinput 添加标签 -->
	<link rel="stylesheet" href="adminskin/css/plugins/tagsinput/jquery.tagsinput.css">
	<!-- 界面 CSS -->
	<link rel="stylesheet" href="adminskin/css/style.css">
	<!-- 肤色 CSS -->
	<link rel="stylesheet" href="adminskin/css/themes.css">
	<!-- 自定义 CSS -->
	<link rel="stylesheet" href="adminskin/css/customerui.css">


	<!-- jQuery -->
	<script src="adminskin/js/jquery.min.js"></script>
	
	<!-- 滚动条插件 -->
	<script src="adminskin/js/plugins/nicescroll/jquery.nicescroll.min.js"></script>
	<!-- imagesLoaded 图像堆叠 -->
	<script src="adminskin/js/plugins/imagesLoaded/jquery.imagesloaded.min.js"></script>
	<!-- jQuery UI -->
	<script src="adminskin/js/plugins/jquery-ui/jquery.ui.core.min.js"></script>
	<script src="adminskin/js/plugins/jquery-ui/jquery.ui.widget.min.js"></script>
	<script src="adminskin/js/plugins/jquery-ui/jquery.ui.mouse.min.js"></script>
	<script src="adminskin/js/plugins/jquery-ui/jquery.ui.draggable.min.js"></script>
	<script src="adminskin/js/plugins/jquery-ui/jquery.ui.resizable.min.js"></script>
	<script src="adminskin/js/plugins/jquery-ui/jquery.ui.sortable.min.js"></script>
	<!-- Touch enable for jquery UI 触摸设备支持-->
	<script src="adminskin/js/plugins/touch-punch/jquery.touch-punch.min.js"></script>
	<!-- slimScroll 悬停滚动条 -->
	<script src="adminskin/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
	<!-- Bootstrap 前端CSS/HTML开发框架 -->
	<script src="adminskin/js/bootstrap.min.js"></script>
	<!-- bootbox 对话框 -->
	<script src="adminskin/js/plugins/bootbox/jquery.bootbox.js"></script>
	<!-- Datepicker日期选择器 -->
	<script src="adminskin/js/plugins/datepicker/bootstrap-datepicker.js"></script>
	<!-- Timepicker时间选择器 -->
	<script src="adminskin/js/plugins/timepicker/bootstrap-timepicker.min.js"></script>
	<!-- Colorpicker颜色选择器 -->
	<script src="adminskin/js/plugins/colorpicker/bootstrap-colorpicker.js"></script>
	<!-- Custom file upload文件上传 -->
	<script src="adminskin/js/plugins/fileupload/bootstrap-fileupload.min.js"></script>
	<script src="adminskin/js/plugins/mockjax/jquery.mockjax.js"></script>
	<!-- Chosen选择 -->
	<script src="adminskin/js/plugins/chosen/chosen.jquery.min.js"></script>
	<!-- MultiSelect 多选-->
	<script src="adminskin/js/plugins/multiselect/jquery.multi-select.js"></script>
	<!-- Filetree 树 -->
	<script src="adminskin/js/plugins/dynatree/jquery.dynatree.js"></script>
	<!-- TagsInput添加标签 -->
	<script src="adminskin/js/plugins/tagsinput/jquery.tagsinput.min.js"></script>
	<!-- CKEditor编辑器 标准版 -->
	<script src="adminskin/js/plugins/ckeditor/ckeditor.js"></script>
	<!-- CKFinder文件管理器 CKEditor版 -->
	<script src="adminskin/js/plugins/ckfinder/ckfinder.js"></script>

	<!-- Theme framework -->
	<script src="adminskin/js/eakroko.min.js"></script>
	<!-- Theme scripts -->
	<script src="adminskin/js/application.min.js"></script>
	<!-- Just for demonstration -->
	<script src="adminskin/js/demonstration.min.js"></script>

	<!--[if lte IE 9]>
		<script src="adminskin/js/plugins/placeholder/jquery.placeholder.min.js"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->
	
	<!-- Favicon -->
	<link rel="shortcut icon" href="adminskin/img/favicon.ico" />
	<!-- Apple devices Homescreen icon -->
	<link rel="apple-touch-icon-precomposed" href="adminskin/img/apple-touch-icon-precomposed.png" />
   <style>

.dropdown-menu{margin-top:0;border:none}
   </style>
 <script>
 $(function () {
	 	
	 	
	 	var initName=GetQueryString("name");
       console.log("23reergre"+initName);
	 	initData(initName);
	 })
	 function GetQueryString(name)
{
     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
     var r = window.location.search.substr(1).match(reg);
     if(r!=null)return  unescape(r[2]); return null;
}
 function stringG(url){
 	
 	var str = url;
 	var index = str.lastIndexOf("/");  
 	str = str.substring(index+1, str.length);
 	return str;
 }
	 function initData(name){
		 
		 $.ajax({
	         async: false,
	         type: "POST",
	         url:"/zrtweb/auth/edit_user",
	         data: {
	        	 name:name
	         },
	         success: function (data, textStatus) {
	        	 if (data.retCode == 0) {
	        	 $("#managerName").val(data.obj.name);
	        	 $("#oldName").val(data.obj.name);
	        	 $("#password").val(data.obj.password);
	        	 $("#password2").val(data.obj.password);
	
				$("#roleid").find("option[value="+data.obj.roleid+"]").attr("selected",true); 
	        	
	        	 }
	         }
		 })
	 }
 function addBtn(){
	 if($("#password").val() != $("#password2").val()) {
		 
		 $("#errmsg")[0].style.display="block";
	        $("#errmsg").text("两次密码不相同,请重新输入");
	        $("#save").attr.disabled = true;
	     }else{
	    	 $("#errmsg")[0].style.display="none";
	    	 var obj={
	    			 "name":$("#managerName").val(),
	    				 "password":$("#password").val(),
	    				 "roleId":$("#roleid").val()
	    	 }
	    	 $.ajax({
	    	       asynca: false,
	    	       type: "POST",
	    	       url:"/zrtweb/auth/update_user",
	    	       data: obj,
	    	       processData: false,  
	    	       contentType: false,
	    	       success: function (data, textStatus) {
	    	      	 if (data.retCode == 0) {
	    	           	alert("修改成功！")
	    	           	location = 'product_list.html';
	    	           	 }else{
	    	           		 alert("修改失败！")
	    	           	 }
	    	       }
	    		 })
 
	     }
	
	
}
</script>
    </script>
</head>

<body>
		<div id="navigation">
		<div class="container-fluid">
			<a href=" " id="brand">自然堂</a>
			<a href="#" class="toggle-nav" rel="tooltip" data-placement="bottom" title="收起侧栏"><i class="icon-reorder"></i></a>
            <ul class='main-nav'>
				<li>
					<a href="product_list.html" data-toggle="dropdown" class='dropdown-toggle'>
						<span>系统首页</span>
						<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
					   <li>
							<a href="/zrtweb/product_list.html">扫码产品管理</a>
						</li>
						
						<li>
							<a href="/zrtweb/">退出</a>
						</li>
					</ul>  
				</li>
				<li class='active' >
					<a href="manager_list.html" data-toggle="dropdown" class='dropdown-toggle'>
						<span>管理员</span>
						<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li>
							<a href="manager_add.html">添加管理员</a>
						</li>
						<li>
							<a href="manager_list.html">管理员管理</a>
						</li>
					</ul>  
				</li>
			</ul>
		</div>
	</div>
	<div class="container-fluid" id="content">
		<div id="left">
			<div class="subnav">
				 <div class="subnav-title">
                    <a href="#" class='toggle-subnav'><i class="icon-angle-down"></i><span>管理员</span></a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="manager_add.html">添加管理员</a>
                    </li>
                    <li>
                        <a href="manager_list.html">管理员管理</a>
                    </li>
                </ul>
				  
			</div>
		</div>
		<div id="main">
			<div class="container-fluid">
				<div class="row-fluid">
					<div class="span12">
						<div class="box box-bordered">
							<div class="box-title">
								<h3><i class="icon-th-list"></i> 添加管理员</h3>
							</div>
							<div class="box-content nopadding">
								<form  class='form-horizontal form-striped'>
									<div class="control-group">
										<label for="textfield" class="control-label">用户名</label>
										<div class="controls">
											<input type="text" name="textfield" id="managerName" placeholder="" class="input-xlarge">
										<input type="hidden" name="textfield" id="oldName" value=""/>
										</div>
									</div>
									<div class="control-group">
										<label for="textfield1" class="control-label">密码</label>
										<div class="controls">
											<input type="password" name="textfield1" id="password" placeholder="" class="input-xlarge">
										</div>
									</div>
                                    <div class="control-group">
                                        <label for="textfield" class="control-label">确认密码</label>
                                        <div class="controls">
                                           <input type="password" name="textfield1" id="password2" placeholder="" class="input-xlarge">
                                            <span id="errmsg" class="help-block" style="display:none">提示信息示例</span>
                                        </div>
                                    </div>
                                 <div class="control-group">
                                        <label for="textfield" class="control-label">选择权限</label>
                                        <div class="controls">
                                          <select id="roleid"><option value="1">管理员</option><option value="2">操作员</option></select>
                                        </div>
                                    </div>
									<div class="form-actions">
										<button type="button" class="btn btn-primary" onclick="addBtn()" id="save">保存</button>
										<button type="button" class="btn" onclick="location = 'manager_list.html'">取消</button>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
<!-- 编辑器 整合 文件管理-->
<script src="adminskin/js/customerui.js"></script>
</body>
</html>